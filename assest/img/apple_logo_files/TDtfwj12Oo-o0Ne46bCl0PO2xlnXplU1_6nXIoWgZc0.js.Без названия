!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";
/**
 * @license
 * Intersection Observers
 * This work is being provided by the copyright holders under the following license.
 *
 * License
 * By obtaining and/or copying this work, you (the licensee) agree that you have read, understood, and will comply with the following terms and conditions.
 * Permission to copy, modify, and distribute this work, with or without modification, for any purpose and without fee or royalty is hereby granted, provided that you include the following on ALL copies of the work or portions thereof, including modifications:
 * - The full text of this NOTICE in a location viewable to users of the redistributed or derivative work.
 * - Any pre-existing intellectual property disclaimers, notices, or terms and conditions. If none exist, the W3C Software and Document Short Notice should be included.
 * - Notice of any changes or modifications, through a copyright statement on the new code or document such as "This software or document includes material copied from or derived from Intersection Observer https://github.com/w3c/IntersectionObserver. Copyright © 2016 W3C® (MIT, ERCIM, Keio, Beihang)."
 *
 * Disclaimers
 * THIS WORK IS PROVIDED "AS IS," AND COPYRIGHT HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE SOFTWARE OR DOCUMENT WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.
 * COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE SOFTWARE OR DOCUMENT.
 * The name and trademarks of copyright holders may NOT be used in advertising or publicity pertaining to the work without specific, written prior permission. Title to copyright in this work will at all times remain with copyright holders./**
 */function r(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function o(e){var t=c();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function u(e,t,n){return(u=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){if("object"==("undefined"==typeof window?"undefined":E(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document;n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},n.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(window,"resize",this._checkForIntersections,!0),i(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var i=r.element,a=o(i),s=this._rootContainsTarget(i),u=r.entry,c=e&&s&&this._computeTargetAndRootIntersection(i,n),l=r.entry=new t({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:a,rootBounds:n,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,l)&&this._queuedEntries.push(l):u&&u.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=window.getComputedStyle(t).display){for(var r,i,a,u,c,l,f,d,g=o(t),v=s(t),p=!1;!p;){var h=null,y=1==v.nodeType?window.getComputedStyle(v):{};if("none"==y.display)return;if(v==this.root||v==e?(p=!0,h=n):v!=e.body&&v!=e.documentElement&&"visible"!=y.overflow&&(h=o(v)),h&&(r=h,i=g,void 0,void 0,void 0,void 0,void 0,void 0,a=Math.max(r.top,i.top),u=Math.min(r.bottom,i.bottom),c=Math.max(r.left,i.left),d=u-a,!(g=(f=(l=Math.min(r.right,i.right))-c)>=0&&d>=0&&{top:a,bottom:u,left:c,right:l,width:f,height:d})))break;v=s(v)}return g}},n.prototype._getRootRect=function(){var t;if(this.root)t=o(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},n.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},n.prototype._rootIsInDom=function(){return!this.root||a(e,this.root)},n.prototype._rootContainsTarget=function(t){return a(this.root||e,t)},n.prototype._registerInstance=function(){},n.prototype._unregisterInstance=function(){},window.IntersectionObserver=n,window.IntersectionObserverEntry=t}function t(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function n(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function r(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function o(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e,t){for(var n=t;n;){if(n==e)return!0;n=s(n)}return!1}function s(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}();var O=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e||!1===e||0===e?String(e):""}(e).trim()},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.00",n=function(e){if("number"==typeof e)return e;if(!e)return null;if("string"!=typeof e)return null;var t=b(e.replace(/[^\d.,]/g,"").split(/[.,](\d{1,2})$/),2),n=t[0],r=void 0===n?"0":n,i=t[1],o=void 0===i?"00":i,a=parseFloat(r.replace(/[^\d/]/g,"")+"."+o);return isNaN(a)?null:a}(e);return null===n?t:n.toFixed(2)},w=[/^APPLE/,/^HOMEPOD/,/^IMAC/,/^IPAD/,/^IPHONE/,/^IPOD/,/^MAC/,/^PRO/,/^W\d\d_/,/^Z/,/\+/,/GIFT_CARDS/,/^AOS/],T=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyPrefix,n=void 0===t?"":t,r=e.valuePrefix,i=void 0===r?"":r,o=e.count,a=void 0===o?0:o,s={},u=1;u<=a;u++)s["".concat(n).concat(u)]="".concat(i).concat(u);return s},S=h(h({CAMPAIGN:"campaign",CHANNEL:"channel",CHAR_SET:"charSet",CITY:"city",CURRENCY_CODE:"currencyCode",EVENTS:"events",HIER1:"hier1",LINK_INTERNAL_FILTERS:"linkInternalFilters",LINK_TRACK_EVENTS:"linkTrackEvents",LINK_TRACK_VARS:"linkTrackVars",LIST_1:"list1",LIST_2:"list2",LIST_3:"list3",PAGE_NAME:"pageName",PAGE_TYPE:"pageType",PAGE_URL:"pageURL",PRODUCTS:"products",PROVINCE:"province",PURCHASE_ID:"purchaseID",REFERRER:"referrer",SERVER:"server",STATE:"state",TRACKING_SERVER:"trackingServer",TRACKING_SERVER_SECURE:"trackingServerSecure",ZIP:"zip"},T({keyPrefix:"PROP_",valuePrefix:"prop",count:75})),T({keyPrefix:"EVAR_",valuePrefix:"eVar",count:155})),P=T({keyPrefix:"EVENT_",valuePrefix:"event",count:520});P.SC_ADD="scAdd",P.PROD_VIEW="prodView",Object.values(S);var A=function(e,t){return e instanceof Element&&t instanceof Event&&(setTimeout((function(){e.dispatchEvent(t)}),0),!0)},I={root:null,sensitivity:.01,engageThreshold:0,disengageThreshold:0},k={sensitivity:{min:.01,max:1},thresholds:{min:0,max:1}},R=function(){function e(t){d(this,e),this.options=h(h({},I),this.getSanitizedOptions(t)),this.observables=new Map,this.observer=new IntersectionObserver(this.observerCallback.bind(this),{root:this.options.root,threshold:this.getObserverThreshold()})}return v(e,[{key:"getSanitizedOptions",value:function(e){if("object"!=E(e))return{};var t=k,n={};return(null===e.root||e.root instanceof Element)&&(n.root=e.root),e.sensitivity>=t.sensitivity.min&&e.sensitivity<=t.sensitivity.max&&(n.sensitivity=Number(e.sensitivity.toFixed(2))),e.engageThreshold>=t.thresholds.min&&e.engageThreshold<=t.thresholds.max&&(n.engageThreshold=Number(e.engageThreshold.toFixed(2))),e.disengageThreshold>=t.thresholds.min&&e.disengageThreshold<=t.thresholds.max&&(n.disengageThreshold=Number(e.disengageThreshold.toFixed(2))),n}},{key:"getObserverThreshold",value:function(){for(var e=this.options.sensitivity||.01,t=[],n=0;n<=1;n+=e)t.push(Number(n.toFixed(2)));return 1!==t[t.length-1]&&t.push(1),t}},{key:"getIntersectionRatio",value:function(e){if(!e.isIntersecting)return 0;var t=e.intersectionRatio;if(e.boundingClientRect.width>e.rootBounds.width||e.boundingClientRect.height>e.rootBounds.height){var n=Math.min(e.boundingClientRect.width,e.rootBounds.width)*Math.min(e.boundingClientRect.height,e.rootBounds.height),r=e.boundingClientRect.width*e.boundingClientRect.height;t=n>0?t*r/n:0}return t}},{key:"observerCallback",value:function(e){var t=this;e.forEach((function(e){var n=t.observables.get(e.target),r=t.getIntersectionRatio(e);n.engaged&&(!e.isIntersecting||r<=t.options.disengageThreshold)?t.disengage(n,e.target):!n.engaged&&r>=t.options.engageThreshold&&t.engage(n,e.target)}))}},{key:"engage",value:function(e,t){var n=Date.now(),r=new CustomEvent("observableEngaged",{bubbles:!0,detail:{data:e.data,observer:this,time:n-e.time}});A(t,r),e.engaged=!0,e.time=n}},{key:"disengage",value:function(e,t){var n=Date.now(),r=new CustomEvent("observableDisengaged",{bubbles:!0,detail:{data:e.data,observer:this,time:n-e.time}});A(t,r),e.engaged=!1,e.time=n}},{key:"observeWithData",value:function(e,t){e instanceof Element&&(this.observables.set(e,{data:t,engaged:!1,time:Date.now()}),this.observer.observe(e))}},{key:"observe",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e.observeWithData.bind(e)(t)}))}},{key:"unobserve",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t instanceof Element&&(e.observer.unobserve(t),e.observables.delete(t))}))}},{key:"update",value:function(e,t,n){if(e instanceof Element&&t instanceof Element){e!==t&&this.observer.unobserve(e);var r=this.observables.get(e);void 0!==n&&(r.data=n),e!==t&&(this.observables.set(t,r),this.observables.delete(e),this.observer.observe(t))}}},{key:"takeRecords",value:function(){var e=Date.now(),t=[];return this.observables.forEach((function(n,r){t.push({element:r,engaged:n.engaged,time:e-n.time,data:n.data})})),t}},{key:"getSize",value:function(){return this.observables.size}},{key:"disconnect",value:function(){this.observer.disconnect(),this.observables.clear()}}]),e}(),L=function(e){if(!e)return{prefix:"",number:0};var t=e.match(/\d+$/);if(!t)return{prefix:e,number:0};var n=t.index;return{prefix:e.slice(0,n),number:parseInt(e.slice(n),10)}},D=function(){function e(t){d(this,e),this.key=O(t)}return v(e,[{key:"merge",value:function(t){return t instanceof e&&(this.key=t.key),this}},{key:"toString",value:function(){return this.key}},{key:"compareKeys",value:function(t){if(!(t instanceof e))return 0;var n=L(this.key),r=n.prefix,i=n.number,o=L(t.key),a=o.prefix,s=o.number;return i===s&&r&&a?r.localeCompare(a):i-s}}]),e}(),M=function(e){i(n,e);var t=o(n);function n(){var e,r;return d(this,n),(e=r=t.call(this)).merge.apply(e,arguments),r}return v(n,[{key:"add",value:function(e){return e instanceof D?this.set(e.key,e):this}},{key:"merge",value:function(){var e=this,t=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t){return t instanceof n?e.push.apply(e,r(t.values())):e.push(t),e}),[]).filter((function(e){return e instanceof D}))}.apply(void 0,arguments);return t.forEach((function(t){if(t instanceof D){var n=e.get(t.key);n?n.merge(t):e.add(t)}})),this}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",";return r(this.values()).map((function(e){return e.toString()})).filter(Boolean).join(e)}},{key:"sort",value:function(){var e=r(this.values());this.clear(),e.sort((function(e,t){return e.compareKeys(t)})),this.merge.apply(this,r(e))}}]),n}(s(Map)),N=function(e){i(n,e);var t=o(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).value=r,i}return v(n,[{key:"merge",value:function(e){return e instanceof n&&e.key===this.key&&(this.value=e.value),this}},{key:"toString",value:function(){if(!this.key)return"";var e=O(this.value);return e&&"true"!==e?"".concat(this.key,"=").concat(e):this.key}}]),n}(D),x=function(e){i(n,e);var t=o(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).value=r,i}return v(n,[{key:"merge",value:function(e){return e instanceof n&&e.key===this.key&&(this.value=e.value),this}},{key:"toString",value:function(){var e=O(this.value);return this.key&&e?"".concat(this.key,"=").concat(e):""}}]),n}(D),C=function(e){i(n,e);var t=o(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,n);var i=h(h({},{sku:"",category:"",qty:0,price:0,events:new M,variables:new M}),r);return i.sku=function(e){if(!e||"string"!=typeof e)return"";var t=e.toUpperCase();return w.some((function(e){return e.test(t)}))?e:e.substring(0,5)}(i.sku),(e=t.call(this,i.sku)).sku=i.sku,e.category=i.category,e.qty=i.qty,e.price=i.price,e.events=i.events,e.variables=i.variables,e}return v(n,[{key:"merge",value:function(e){return e instanceof n&&e.key===this.key&&(this.category=e.category||this.category,this.qty=e.qty||this.qty,this.price=e.price||this.price,this.events.merge(e.events),this.variables.merge(e.variables)),this}},{key:"toString",value:function(){return[O(this.category),O(this.sku),this.qty?O(this.qty):"",this.price?_(this.price):"",this.events?this.events.toString("|"):"",this.variables?this.variables.toString("|"):""].join(";").replace(",","")}}]),n}(D),V=S.PROP_34,G=S.PROP_35,B=S.PROP_36,F=P.EVENT_243,U=P.EVENT_244,H=P.EVENT_4,q=/^mzone:/i,z={coupling:null,config:Object.freeze({__proto__:null,SELECTOR:"[data-analytics-section],[data-analytics-section-engagement]",DISENGAGE_THRESHOLD:.33,ENGAGE_THRESHOLD:.48,ENGAGE_TIME_THRESHOLD:1e3,BEACON_NAME:"section engagement",BEACON_VAR:V,BEACON_VAR_TIME_ENGAGED:G,BEACON_VAR_POSITION_NUMBER:B,BEACON_EVENT_TIME_ENGAGED:F,BEACON_EVENT:U,BEACON_EVENT_MERCH_IMPRESSION:H,SCROLL_DEBOUNCE_DELAY:1e3,PRECISION:2,RE_MZONE:q}),trackedSections:null,processedSections:null,engagementObserver:null,onScrollDebounced:null},W=function(e){e.detail.observer===z.engagementObserver&&(e.detail.time<z.config.ENGAGE_TIME_THRESHOLD||Y({section:e.target,time:e.detail.time,name:e.detail.data.name,position:e.detail.data.position}))},K=function(){window.document.body.removeEventListener("observableDisengaged",W),window.removeEventListener("scroll",z.onScrollDebounced),window.removeEventListener("resize",z.onScrollDebounced)},Y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.section,r=t.name,i=t.time,o=t.position;if(z.engagementObserver.unobserve(n),0===z.engagementObserver.getSize()&&K(),!z.processedSections.has(r)){z.processedSections.add(r);var a=(i/1e3).toFixed(z.config.PRECISION),s=new M(new N(z.config.BEACON_EVENT),new N(z.config.BEACON_EVENT_TIME_ENGAGED,a)),u=(y(e={},z.config.BEACON_VAR,r.toLowerCase()),y(e,z.config.BEACON_VAR_TIME_ENGAGED,a),y(e,z.config.BEACON_VAR_POSITION_NUMBER,String(o)),e);if(q.test(r)){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.section,n=e.zoneId,r=void 0===n?"":n;if(!t)return null;var i=Array.from(t.querySelectorAll('[role="listitem"]')),o=new M;return i.forEach((function(e,t){var n=function(e){var t=function(e){var t=e.element,n=e.module;return function(e){return t&&t.dataset[e]||n&&n.dataset[e]||""}}({element:e.element,module:e.module}),n=t("basePartNumber")||t("partNumber"),r=t("category"),i=t("ruleId");return""===n&&(n=t("moduleId"),r="content"),{sku:n||t("moduleId"),ruleId:i,category:r}}({element:e.querySelector("form,a,button"),module:e}),a=n.sku,s=n.category,u=n.ruleId;if(""!==a){var c="".concat(t+1,"/").concat(i.length),l=new M(new x(S.EVAR_60,r),new x(S.EVAR_61,u),new x(S.EVAR_65,c)),f=new C({category:s,sku:a,variables:l});o.add(f)}})),0===o.size?null:o}({section:n,zoneId:r.slice(r.indexOf(":")+1)});null!==c&&(u[S.PRODUCTS]=c,s.add(new N(z.config.BEACON_EVENT_MERCH_IMPRESSION)))}u[S.EVENTS]=s.toString(),z.coupling.sendUserInteraction({name:z.config.BEACON_NAME,beacon:u})}},J=function(){window.innerHeight+window.pageYOffset<window.document.body.offsetHeight-2||z.engagementObserver.takeRecords().filter((function(e){var t=e.engaged,n=e.time;return t&&n>=z.config.ENGAGE_TIME_THRESHOLD})).forEach((function(e){var t=e.element,n=e.time,r=e.data;Y({section:t,name:r.name,time:n,position:r.position})}))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coupling,n=e.config,r=void 0===n?{}:n;"object"!=E(t)||!r.sections&&"function"!=typeof t.getSectionName||"function"!=typeof t.sendUserInteraction?console.warn("Analytics Section Engagement could not find an interface to work with"):(z.coupling=t,z.config=h(h({},z.config),r),z.trackedSections=new Set,z.processedSections=new Set,z.engagementObserver=new R({engageThreshold:z.config.ENGAGE_THRESHOLD,disengageThreshold:z.config.DISENGAGE_THRESHOLD}),z.onScrollDebounced=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){n=null,e.apply(void 0,i)}),t)}}(J,z.config.SCROLL_DEBOUNCE_DELAY))},$=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=b(t.value,2),o=i[0],a=i[1],s=document.querySelector(o);s&&a&&n.push({section:s,name:a,position:n.length+1})}}catch(e){r.e(e)}finally{r.f()}return n},Z=function(){z.engagementObserver.disconnect();var e=(z.config.sections?$(z.config.sections):function(e){var t=[],n=new Set;return r(document.querySelectorAll(e)).forEach((function(e){var r=z.coupling.getSectionName(e);r&&!n.has(r)&&(n.add(r),t.push({section:e,name:r,position:t.length+1}))})),t}(z.config.SELECTOR)).filter((function(e){var t=e.name;return!z.processedSections.has(t)}));e.length?(window.document.body.addEventListener("observableDisengaged",W),window.addEventListener("scroll",z.onScrollDebounced),window.addEventListener("resize",z.onScrollDebounced),e.forEach((function(e){var t=e.section,n=e.name,r=e.position;z.engagementObserver.observeWithData(t,{name:n,position:r})})),z.trackedSections=e):K()},X=function(){z.engagementObserver.disconnect(),z.processedSections.clear()},ee=function(){X(),Z()},te={update:Z,pageLoad:function(){ee()},reset:ee,stop:X,debug:{trackedSections:function(){return z.trackedSections.map((function(e){return h({},e)}))}}},ne=!1;t.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coupling,n=e.config;return ne||(Q({coupling:t,config:n}),ne=!0),te}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.triggerPreparedTags=n.prepareTag=void 0;var r=e("../util/index.js"),i=e("../tags/index.js"),o=e("../data/index.js"),a=e("../events/index.js"),s=e("../libraries/index.js"),u=[];(0,r.on)("tag:defer:all:loaded",(function(){(0,a.processQueuedEvents)(),c()}));n.prepareTag=function(e){var t=e.tag,n=e.eventData,i=(0,r.getLogger)();u.some((function(e){var n=e.checksum;return t.checksum===n}))?i.warn("aiw001"):u.push({tag:t,eventData:n})};var c=function(){(0,r.getLogger)();var e=u.reduce((function(e,t){var n=t.tag,r=t.eventData,i=(0,o.resolveTagData)(n.data,r);return(n.actions||[]).forEach((function(t){e[t.library]||(e[t.library]=[]),e[t.library].push({action:t,data:i})})),e}),{});Object.keys(e).forEach((function(t){(0,s.triggerLibraryAction)(t,e[t])})),u.filter((function(e){return e.tag.triggerOnce})).forEach((function(e){var t=e.tag.checksum;(0,i.setTagDone)(t)})),u=[]};n.triggerPreparedTags=c},{"../data/index.js":3,"../events/index.js":25,"../libraries/index.js":29,"../tags/index.js":42,"../util/index.js":47}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolveTagData=void 0;var r=e("../util/index.js"),i=e("./types/index.js"),o=e("./transformations/index.js");n.resolveTagData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e||[]).reduce((function(e,n){try{var a=n.key,s=n.datamapping,u=(0,i.resolveDataMapping)(s,e,t),c=s.transformations;e[a]=(0,o.applyTransformations)(u,c,e)}catch(e){(0,r.getLogger)().error("dire001")}return e}),{})}},{"../util/index.js":47,"./transformations/index.js":5,"./types/index.js":20}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.capitalize=void 0;var r=e("../util.js");n.capitalize=function(e){return(0,r.hasAnything)(e)&&e.charAt&&e.slice?e.charAt(0).toUpperCase()+e.slice(1):e}},{"../util.js":23}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.applyTransformations=void 0;var r=e("../../util/index.js"),i=e("./capitalize.js"),o=e("./join.js"),a=e("./padLeft.js"),s=e("./padRight.js"),u=e("./replace.js"),c=e("./split.js"),l=e("./substring.js"),f=e("./toBoolean.js"),d=e("./toJSON.js"),g=e("./toLowerCase.js"),v=e("./toNumber.js"),p=e("./toString.js"),h=e("./toUpperCase.js"),y=e("./trim.js"),b={capitalize:i.capitalize,join:o.join,padleft:a.padLeft,padright:s.padRight,replace:u.replace,split:c.split,substring:l.substring,toboolean:f.toBoolean,tojson:d.toJSON,tolowercase:g.toLowerCase,tonumber:v.toNumber,tostring:p.toString,trim:y.trim,uppercase:h.toUpperCase};n.applyTransformations=function(e,t,n){return(t||[]).reduce((function(e,t){var i=b[t.type];return i?i(e,t,n):((0,r.getLogger)().warn("drw001"),e)}),e)}},{"../../util/index.js":47,"./capitalize.js":4,"./join.js":6,"./padLeft.js":7,"./padRight.js":8,"./replace.js":9,"./split.js":10,"./substring.js":11,"./toBoolean.js":12,"./toJSON.js":13,"./toLowerCase.js":14,"./toNumber.js":15,"./toString.js":16,"./toUpperCase.js":17,"./trim.js":18}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.join=void 0;var r=e("../util.js");n.join=function(e,t,n){return(0,r.hasAnything)(e)&&e.join?e.join((0,r.resolveDataValue)(t.value,n)):e}},{"../util.js":23}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.padLeft=void 0;var r=e("../util.js");n.padLeft=function(e,t,n){return(0,r.hasAnything)(e)&&e.padStart?e.padStart((0,r.resolveDataValue)(t.amount,n),(0,r.resolveDataValue)(t.value,n)):e}},{"../util.js":23}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.padRight=void 0;var r=e("../util.js");n.padRight=function(e,t,n){return(0,r.hasAnything)(e)&&e.padEnd?e.padEnd((0,r.resolveDataValue)(t.amount,n),(0,r.resolveDataValue)(t.value,n)):e}},{"../util.js":23}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replace=void 0;var r=e("../util.js");n.replace=function(e,t,n){if(!(0,r.hasAnything)(e)||!e.replace)return e;var i=(0,r.resolveDataValue)(t.find,n),o=(0,r.resolveDataValue)(t.replace,n);return e.replace(i,o)}},{"../util.js":23}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.split=void 0;var r=e("../util.js");n.split=function(e,t,n){return(0,r.hasAnything)(e)&&e.split?e.split((0,r.resolveDataValue)(t.value,n)):e}},{"../util.js":23}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.substring=void 0;var r=e("../util.js");n.substring=function(e,t,n){return(0,r.hasAnything)(e)&&e.substring?e.substring((0,r.resolveDataValue)(t.start,n),(0,r.resolveDataValue)(t.end,n)):e}},{"../util.js":23}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toBoolean=void 0;n.toBoolean=function(e){return Boolean(e)}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toJSON=void 0;var r=e("../../util/index.js"),i=e("../util.js");n.toJSON=function(e){if(!(0,i.hasAnything)(e))return e;try{return JSON.parse(e)}catch(e){return(0,r.getLogger)().warn("drw002"),null}}},{"../../util/index.js":47,"../util.js":23}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toLowerCase=void 0;var r=e("../util.js");n.toLowerCase=function(e){return(0,r.hasAnything)(e)&&e.toLowerCase?e.toLowerCase():e}},{"../util.js":23}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toNumber=void 0;n.toNumber=function(e){return e?Number(e):0}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toString=void 0;var r=e("../util.js");n.toString=function(e){return(0,r.hasAnything)(e)&&e.toString()?e.toString():e}},{"../util.js":23}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toUpperCase=void 0;var r=e("../util.js");n.toUpperCase=function(e){return(0,r.hasAnything)(e)&&e.toLowerCase?e.toUpperCase():e}},{"../util.js":23}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.trim=void 0;var r=e("../util.js");n.trim=function(e){return(0,r.hasAnything)(e)&&e.trim?e.trim():e}},{"../util.js":23}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.element=void 0;var r=e("../util.js");n.element=function(e,t,n){var i=e.value,o=i.o,a=i.d,s=i.s,u=i.k,c=(0,r.resolveDataValue)(s,t),l=function(e,t,n,r){return"document"===e?document:t?r[t]:n.target}(o,u,n,t);if(!l)return null;var f="querySelector";return"document"!==o&&"child"!==a&&(f="closest"),l[f](c)}},{"../util.js":23}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolveDataMapping=void 0;var r=e("../../util/index.js"),i=e("./string.js"),o=e("./state.js"),a=e("./element.js"),s={string:i.string,state:o.state,element:a.element};n.resolveDataMapping=function(e,t,n){var i=e.type,o=s[i];return o?o(e,t,n):((0,r.getLogger)().warn("dtw001"),null)}},{"../../util/index.js":47,"./element.js":19,"./state.js":21,"./string.js":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.state=void 0;var r=e("../util.js"),i=e("../../state/index.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s({},"m",(function(e,t,n,r){switch(t){case"c":return"*"===n?e:Array.isArray(e)&&"*"===r?e.map((function(e){return e[n]})).filter(Boolean):e[n]||null;default:return null}})),c=s({},"i",(function(e,t){return(0,r.resolveDataValue)(e,t)}));n.state=function(e,t,n){var r=e.value,o=(0,i.getState)()||{},s=a(a({},(0,i.getState)()||{}),{},{event:a(a({},o.event||{}),n||{})}),l=[];return(r||[]).reduce((function(e,n,r){if(!e)return null;var i=u[n.o];if(!i)return null;var o=n.s||"c";if("c"!==o)return null;if(!(n.e&&n.e.t&&n.e.v&&c[n.e.t]))return null;var a=c[n.e.t](n.e.v,t);return l.push(a),i(e,o,a,l[r-1])}),s)}},{"../../state/index.js":40,"../util.js":23}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.string=void 0;var r=e("../util.js");n.string=function(e,t){var n=e.value;return(0,r.resolveDataValue)(n,t)}},{"../util.js":23}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolveDataValue=n.hasAnything=void 0;n.hasAnything=function(e){return null!=e};n.resolveDataValue=function(e,t){if(!Array.isArray(e))return e;var n=t||{};return e.map((function(e){return e?null===e.key?"":e.key?n[e.key]||"":e:""})).join("")}},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.processQueuedEvents=n.setup=void 0;var r=e("../tags/index.js"),i=e("../util/index.js"),o=e("../actions/index.js"),a=[],s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isQueued:!1},n=t.isQueued,s=e.detail,u=s.name,c=s.data,l=s.version;(0,i.getLogger)();n||((0,r.getLoadedInitialTags)().filter((function(e){return((e.data||{}).events||[]).some((function(e){var t=e.type,n=e.selector;return"custom"===t&&n===u}))})).forEach((function(e){(0,o.prepareTag)({tag:e.data,eventData:c,version:l})})),(0,r.areDeferTagsDone)())?((0,r.getLoadedDeferTags)().filter((function(e){return((e.data||{}).events||[]).some((function(e){var t=e.type,n=e.selector;return"custom"===t&&n===u}))})).forEach((function(e){(0,o.prepareTag)({tag:e.data,eventData:c,version:l})})),a=[]):a.push(e)};n.setup=function(){(0,i.on)("event:custom",(function(e){var t=(0,i.getLogger)();try{s(e),(0,o.triggerPreparedTags)()}catch(e){t.error("ecse001")}})),(0,i.on)("tag:defer:all:loaded",(function(){var e=(0,i.getLogger)();try{a.forEach((function(e){return s(e,{isQueued:!0})})),a=[],(0,o.triggerPreparedTags)()}catch(t){e.error("ecse002")}}))};n.processQueuedEvents=function(){a.forEach((function(e){return s(e,{isQueued:!0})})),a=[]}},{"../actions/index.js":2,"../tags/index.js":42,"../util/index.js":47}],25:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.processQueuedEvents=n.setupEvents=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(e("./customEvent.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}e("./stateEvent.js");n.setupEvents=function(){i.setup()};n.processQueuedEvents=function(){i.processQueuedEvents()}},{"./customEvent.js":24,"./stateEvent.js":26}],26:[function(e,t,n){"use strict";var r=e("../util/index.js"),i=e("../state/index.js");(0,r.on)("state:update",(function(e){var t=(0,r.getLogger)();try{var n=e.detail,o=n.data,a=n.type;(0,i.updateState)({type:a,data:o})}catch(e){t.error("esoe001")}}))},{"../state/index.js":40,"../util/index.js":47}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLibraries=n.setLibraries=void 0;var r={};n.setLibraries=function(e){r=e};n.getLibraries=function(){return r}},{}],28:[function(e,t,n){"use strict";n.LIBRARY_KEYS={ADOBE:"adobe",DEBUG:"debug",SECTION_ENGAGEMENT:"section-engagement"}},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initLibraries=n.triggerLibraryAction=void 0;var r=e("../util/index.js"),i=e("./config/index.js");n.triggerLibraryAction=function(e,t){var n=(0,i.getLibraries)(),o=(0,r.getLogger)(),a=n[e];a?a.triggerActions?a.triggerActions(t):o.warn("liw002"):o.warn("liw001")};n.initLibraries=function(e){Object.values(e).forEach((function(e){return e.init&&e.init()}))}},{"../util/index.js":47,"./config/index.js":27}],30:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.setSectionEngagementApi=n.getSectionEngagementApi=void 0;n.getSectionEngagementApi=function(){return r};n.setSectionEngagementApi=function(e){return r=e}},{}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE=void 0;n.UPDATE="update"},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.triggerActions=void 0;var r=e("../../util/index.js"),i=e("./constants.js"),o=e("./updateSectionEngagement.js"),a=e("./initializeSectionEngagement.js");n.triggerActions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=((0,r.getLogger)(),e.some((function(e){var t=e.action;return t&&t.type===i.UPDATE})));var n=t?o.updateSectionEngagement:a.initializeSectionEngagement;n(e)}},{"../../util/index.js":47,"./constants.js":31,"./initializeSectionEngagement.js":33,"./updateSectionEngagement.js":35}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initializeSectionEngagement=void 0;var r=u(e("@apple/analytics-graffiti-base-tag-meta/lib/sectionEngagement.js")),i=e("../util/getASMetricsForGraffiti.js"),o=e("./api.js"),a=e("./sectionEngagementPageLoad.js"),s=u(e("./validate.js"));function u(e){return e&&e.__esModule?e:{default:e}}n.initializeSectionEngagement=function(e){if((0,s.default)(e)){var t=e[0],n=t.action,u=t.data[n.selectorsValuesAccessor],c=(0,i.getASMetrics)(),l=(0,r.default)({coupling:{sendUserInteraction:c&&c.sendUserInteraction},config:{sections:u}});(0,o.setSectionEngagementApi)(l),(0,a.sectionEngagementPageLoad)()}}},{"../util/getASMetricsForGraffiti.js":38,"./api.js":30,"./sectionEngagementPageLoad.js":34,"./validate.js":36,"@apple/analytics-graffiti-base-tag-meta/lib/sectionEngagement.js":1}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sectionEngagementPageLoad=void 0;var r=e("../../util/index.js"),i=e("./api.js");n.sectionEngagementPageLoad=function(){var e=(0,r.getLogger)(),t=(0,i.getSectionEngagementApi)();t&&t.pageLoad?"loading"!==document.readyState?t.pageLoad():document.addEventListener("DOMContentLoaded",t.pageLoad):e.error("sec001")}},{"../../util/index.js":47,"./api.js":30}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.updateSectionEngagement=void 0;var r=e("../../util/index.js"),i=e("./api.js");n.updateSectionEngagement=function(){var e=(0,r.getLogger)(),t=(0,i.getSectionEngagementApi)();t&&t.update?t.update():e.error("sec001")}},{"../../util/index.js":47,"./api.js":30}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../util/index.js"),i=function(e){var t=(0,r.getLogger)();if(!e.length||e.length>1)return t.error("liw003"),!1;var n=e[0],i=n.action,o=n.data;return!(!i||!o)||(t.error("liw004"),!1)};n.default=i},{"../../util/index.js":47}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GRAFFITI_KEY=void 0;var r="function"==typeof Symbol?Symbol.for("graffiti"):"__graffiti__";n.GRAFFITI_KEY=r},{}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getASMetrics=n.getASMetricsForGraffiti=void 0;var r=e("./constants.js");n.getASMetricsForGraffiti=function(){return window.asMetrics&&window.asMetrics[r.GRAFFITI_KEY]};n.getASMetrics=function(){return window.asMetrics}},{"./constants.js":37}],39:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=e("./tags/index.js"),o=e("./events/index.js"),a=e("./libraries/index.js"),s=e("./libraries/config/index.js"),u=e("./libraries/config/key.js"),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(e("./libraries/section-engagement/index.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}!function(){(0,o.setupEvents)(),(0,i.loadTags)();var e,t,n,r=(e={},t=u.LIBRARY_KEYS.SECTION_ENGAGEMENT,n=c,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e);(0,s.setLibraries)(r),(0,a.initLibraries)(r)}()},{"./events/index.js":25,"./libraries/config/index.js":27,"./libraries/config/key.js":28,"./libraries/index.js":29,"./libraries/section-engagement/index.js":32,"./tags/index.js":42}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.updateState=n.getState=n.initState=n.STATE_TYPES=void 0;var r=e("./util.js");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={GLOBAL:"global",EVENT:"event"};n.STATE_TYPES=s;var u={global:{browser:{platform:navigator.platform,osVersion:(0,r.getOSVersion)(),pixelRatio:(window.devicePixelRatio||0)>=2?" 2x":""}},event:{},adobe:{}};n.initState=function(e){var t=e.type,n=void 0===t?s.GLOBAL:t,r=e.data,i=n||s.GLOBAL;return u[i]=r,u[i]};n.getState=function(e){return e?u[e]||null:u};n.updateState=function(e){var t=e.type,n=e.data,r=t||s.GLOBAL;return u[r]||(u[r]={}),u[r]=o(o({},u[r]),n),u[r]}},{"./util.js":41}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getOSVersion=void 0;n.getOSVersion=function(){var e=navigator.userAgent;if(e.match(/windows/i))return"windows";if(e.match(/(kindle|silk-accelerated)/i))return e.match(/(kindle fire|silk-accelerated)/i)?"kindle fire":"kindle";if(e.match(/(iphone|ipod|ipad)/i))return"i"+e.match(/OS [0-9_]+/i)[0].replace(/_/g,".");if(e.match(/android/i))return e.match(/android [0-9]\.?[0-9]?\.?[0-9]?/i);if(e.match(/webos\/[0-9\.]+/i))return e.match(/webos\/[0-9]\.?[0-9]?\.?[0-9]?/i)[0].replace(/webos\//i,"web os ");if(e.match(/rim tablet os [0-9\.]+/i))return e.match(/rim tablet os [0-9]\.?[0-9]?\.?[0-9]?/i)[0].replace(/rim tablet os/i,"rim os ");if((e.match(/firefox\/(\d{2}||[3-9])/i)||e.match(/AppleWebKit\//))&&e.match(/Mac OS X [0-9_\.]+/)){var t=e.match(/[0-9_\.]+/g);return(t=t[1].split(/_|\./))[0]+"."+t[1]+".x"}var n=e.match(/AppleWebKit\/\d*/i)&&e.match(/AppleWebKit\/\d*/i).toString().replace(/AppleWebKit\//i,"");return n>522?"10.5.x":n>400?"10.4.x":n>99?"10.3.x":n>80?"10.2.x":"mac unknown or non-safari"}},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./loadTags.js");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=e("./tagRegistry.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}))},{"./loadTags.js":43,"./tagRegistry.js":44}],43:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loadTags=void 0;var r=e("../util/index.js"),i=e("./tagRegistry.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={},u=function(e){return e.ok?e:Promise.reject('failed-fetch-"'.concat(e.status,'"'))},c=function(e){return e.json()},l=function(e,t,n){return function(r){clearTimeout(n),(0,i.setTagData)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({checksum:e},r)),t(e)}},f=function(e){var t=e.url,n=e.checksum;return new Promise((function(e){var r=setTimeout((function(){(0,i.setTagError)(n,"timeout"),e(n)}),1e4);try{0,fetch(t,{integrity:n}).then(u).then(c).then(l(n,e,r)).catch(function(e,t,n){return function(r){clearTimeout(n),(0,i.setTagError)(e,r),t(e)}}(n,e,r))}catch(t){clearTimeout(r),(0,i.setTagError)(n,t),e(n)}}))};n.loadTags=function(){var e=(0,r.getLogger)(),n=document.querySelector("#graffiti-tags");if(n){var o=(0,r.parseJSON)(n?n.textContent:null)||[];if(o.length){var a=(0,i.initRegistry)(o).reduce((function(e,t){return t.initial?e.initial.push(t):e.defer.push(t),e}),{defer:[],initial:[]}),u=a.defer,c=a.initial;(0,r.on)("tag-loaded",(function(e){var t=e.detail;clearTimeout(s[t.checksum]);var n=document.querySelector('script[integrity="'.concat(t.checksum,'"]'));(0,i.setTagData)(t.checksum,t,n?n.getAttribute("src"):null)})),function(e){e.forEach((function(e){var t=e.checksum;s[t]=setTimeout((function(){var e=document.querySelector('script[integrity="'.concat(t,'"]'));e||(0,r.getLogger)().error("tlte002"),(0,i.setTagError)(t,"timeout",e?e.getAttribute("src"):null)}),1e4)})),t.addEventListener("DOMContentLoaded",(function(){(0,i.getPendingInitialTags)().forEach((function(e){var t=e.checksum,n=document.querySelector('script[integrity="'.concat(t,'"]'));n||(0,r.getLogger)().error("tlte002"),clearTimeout(s[t]),(0,i.setTagError)(t,"dom-loaded-before",n?n.getAttribute("src"):null)}))}))}(c),function(e){Promise.all(e.map(f))}(u)}else e.warn("tltw001")}else e.error("tlte001")}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/index.js":47,"./tagRegistry.js":44}],44:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addTag=n.setTagDone=n.setTagError=n.setTagData=n.getTagByChecksum=n.getPendingDeferTags=n.getPendingInitialTags=n.getDeferTags=n.getInitialTags=n.getPendingTags=n.getFailedTags=n.getLoadedDeferTags=n.getLoadedInitialTags=n.getLoadedTags=n.getAllTags=n.initRegistry=n.areDeferTagsDone=n.EVENTS=n.TAG_INIT_LIMIT=void 0;var t=e("../util/index.js");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=[],a=!1,s=!1;n.TAG_INIT_LIMIT=200;var u=0,c=1,l=2,f=4,d={INITIAL_TAGS_DONE:"tag:inital:all:loaded",DEFER_TAGS_DONE:"tag:defer:all:loaded"};n.EVENTS=d;var g=function(){a||m().length||(a=!0,(0,t.trigger)(d.INITIAL_TAGS_DONE,y())),s||!a||j().length||(s=!0,(0,t.trigger)(d.DEFER_TAGS_DONE,b()))};n.areDeferTagsDone=function(){return s};var v=function(e){return(o=(e||[]).sort((function(e,t){return e.p-t.p})).reduce((function(e,t){return e.find((function(e){var n=e.c;return t.c===n}))?e:e.concat({url:t.u||null,checksum:t.c,priority:t.p,data:null,status:u,initial:t.p<200})}),[])).length||g(),o};n.initRegistry=v;var p=function(){return o};n.getAllTags=p;var h=function(){return o.filter((function(e){return e.status===c}))};n.getLoadedTags=h;var y=function(){return o.filter((function(e){var t=e.status,n=e.initial;return t===c&&n}))};n.getLoadedInitialTags=y;var b=function(){return o.filter((function(e){var t=e.status,n=e.initial;return t===c&&!n}))};n.getLoadedDeferTags=b;n.getFailedTags=function(){return o.filter((function(e){return e.status===l}))};n.getPendingTags=function(){return o.filter((function(e){return e.status===u}))};n.getInitialTags=function(){return o.filter((function(e){return e.initial}))};n.getDeferTags=function(){return o.filter((function(e){return!e.initial}))};var m=function(){return o.filter((function(e){var t=e.status;return e.initial&&t===u}))};n.getPendingInitialTags=m;var j=function(){return o.filter((function(e){var t=e.status;return!e.initial&&t===u}))};n.getPendingDeferTags=j;var E=function(e){return o.find((function(t){return t.checksum===e}))||null};n.getTagByChecksum=E;var O=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=(0,t.getLogger)();if(!e||!n)return i.warn("ttrw001"),o;var a=E(e);return a?a.status!==u?(i.warn("ttrw003"),o):(a.data=n,a.status=c,r&&(a.url=r),g(),o):(i.warn("ttrw002"),o)};n.setTagData=O;n.setTagError=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=(0,t.getLogger)();if(!e||!n)return i.warn("ttrw004"),o;var a=E(e);return a?a.status!==u?(i.warn("ttrw006"),o):(a.error=n,a.status=l,r&&(a.url=r),g(),o):(i.warn("ttrw005"),o)};n.setTagDone=function(e){var n=(0,t.getLogger)();if(!e)return n.warn("ttrw007"),o;var r=E(e);return r?r.status!==c?(n.warn("ttrw009"),o):(r.status=f,g(),o):(n.warn("ttrw008"),o)};var _=function(e){var n=(0,t.getLogger)();if(!e||!e.checksum||!e.priority)return n.warn("ttrw005"),o;if(E(e.checksum))return n.warn("ttrw006"),o;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:null,data:null,initial:!1,status:u},e);o=o.concat(a).sort((function(e,t){return e.priority-t.priority}))};n.addTag=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/index.js":47}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cookiesToString=n.cookiesToObject=void 0;n.cookiesToObject=function(e){return(e||"").split(/; /).reduce((function(e,t){var n=t.slice(0,t.indexOf("=")),r=t.slice(t.indexOf("=")+1);return r&&(e[n]=r),e}),{})};n.cookiesToString=function(e){return Object.keys(e||{}).map((function(t){return t+"="+e[t]}),[]).join("; ")}},{}],46:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getOn=n.on=n.getTrigger=n.trigger=void 0;n.trigger=function(t,n){e.dispatchEvent(new CustomEvent("graffiti:"+t,{detail:n}))};n.getTrigger=function(t){return function(n,r){e.dispatchEvent(new CustomEvent("graffiti:"+t+":"+n,{detail:r}))}};n.on=function(t,n){return e.addEventListener("graffiti:"+t,n)};n.getOn=function(t){return function(n,r){e.addEventListener("graffiti:"+t+":"+n,r)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./parseJSON.js");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=e("./events.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=e("./logger.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=e("./cookies.js");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}))},{"./cookies.js":45,"./events.js":46,"./logger.js":48,"./parseJSON.js":49}],48:[function(e,t,n){(function(e){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLogger=void 0;var t=function(){};n.getLogger=function(){return e[Symbol.for("graffiti:dev-logger")]||{log:t,trace:t,debug:t,info:t,warn:t,error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["graf:"].concat(n))}}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parseJSON=void 0;n.parseJSON=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},{}]},{},[39]);